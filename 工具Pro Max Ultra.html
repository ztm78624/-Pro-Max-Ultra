<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习世界 Pro Max Ultra V6</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f39c12;
            --tertiary-color: #e74c3c;
            --background-color: #f0f4f8;
            --text-color: #333;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --neumorphism-light: #ffffff;
            --neumorphism-dark: #d1d9e6;
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans SC', sans-serif;
        }

        html, body {
            overflow: hidden;
            height: 100%;
        }

        body {
            background: linear-gradient(135deg, #e0eafc, #cfdef3);
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-color);
            transition: background var(--transition-speed), color var(--transition-speed);
            line-height: 1.6;
        }

        .container {
            width: 95%;
            max-width: 1400px;
            height: 90vh;
            background: var(--neumorphism-light);
            border-radius: 30px;
            display: flex;
            box-shadow: 
                20px 20px 60px var(--neumorphism-dark),
                -20px -20px 60px var(--neumorphism-light);
            transition: all var(--transition-speed);
            overflow: hidden;
            position: relative;
        }

        .sidebar {
            width: 70px;
            background: linear-gradient(135deg, var(--primary-color), #3a7bc8);
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            transition: all var(--transition-speed);
        }

        .menu-item {
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all var(--transition-speed);
            margin-bottom: 10px;
            position: relative;
        }

        .menu-item:hover, .menu-item.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .menu-item:active {
            transform: translateY(1px) scale(0.98);
        }

        .menu-item i {
            font-size: 20px;
            transition: all var(--transition-speed);
        }

        .menu-item .tooltip {
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s, transform 0.3s;
        }

        .menu-item:hover .tooltip {
            opacity: 1;
            transform: translateY(-50%) translateX(10px);
        }

        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
            max-height: 90vh;
        }

        .content {
            display: none;
            animation: fadeIn 0.5s ease;
            height: 100%;
        }

        .content.active {
            display: flex;
            flex-direction: column;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 24px;
            text-shadow: 2px 2px 4px var(--neumorphism-dark);
        }

        .countdown {
            background: linear-gradient(145deg, #e6e6e6, #ffffff);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 
                10px 10px 20px var(--neumorphism-dark),
                -10px -10px 20px var(--neumorphism-light);
            transition: all var(--transition-speed);
        }

        .countdown:hover {
            transform: translateY(-5px);
        }

        .countdown h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 20px;
        }

        .countdown-timer {
            font-size: 28px;
            color: var(--text-color);
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }

        .countdown-unit {
            display: inline-block;
            margin: 0 8px;
            text-align: center;
            position: relative;
            width: 70px;
        }

        .countdown-unit span {
            display: block;
        }

        .countdown-value {
            font-size: 32px;
            background: linear-gradient(145deg, #e6e6e6, #ffffff);
            border-radius: 10px;
            padding: 8px;
            box-shadow: 
                inset 5px 5px 10px var(--neumorphism-dark),
                inset -5px -5px 10px var(--neumorphism-light);
        }

        .countdown-label {
            font-size: 12px;
            margin-top: 5px;
            color: var(--secondary-color);
        }

        .input-group {
            display: flex;
            margin-bottom: 20px;
            gap: 10px;
        }

        .task-input, .plan-input, .motivation-input, .focus-time-input, .resource-input {
            flex-grow: 1;
            padding: 10px;
            border: none;
            border-radius: 15px;
            font-size: 14px;
            transition: all var(--transition-speed);
            background: var(--neumorphism-light);
            box-shadow: 
                inset 5px 5px 10px var(--neumorphism-dark),
                inset -5px -5px 10px var(--neumorphism-light);
        }

        .task-input:focus, .plan-input:focus, .motivation-input:focus, .focus-time-input:focus, .resource-input:focus {
            outline: none;
            box-shadow: 
                inset 7px 7px 14px var(--neumorphism-dark),
                inset -7px -7px 14px var(--neumorphism-light);
        }

        .add-btn, .start-focus-btn, .import-btn {
            padding: 10px 15px;
            background: linear-gradient(145deg, var(--primary-color), #3a7bc8);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all var(--transition-speed);
            font-size: 14px;
            box-shadow: 
                5px 5px 10px var(--neumorphism-dark),
                -5px -5px 10px var(--neumorphism-light);
        }

        .add-btn:hover, .start-focus-btn:hover, .import-btn:hover {
            background: linear-gradient(145deg, #3a7bc8, var(--primary-color));
            transform: translateY(-2px);
        }

        .add-btn:active, .start-focus-btn:active, .import-btn:active {
            transform: translateY(1px) scale(0.98);
        }

        .list-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .list-column {
            flex: 1;
            min-width: 200px;
            background: var(--neumorphism-light);
            border-radius: 20px;
            padding: 15px;
            box-shadow: 
                5px 5px 10px var(--neumorphism-dark),
                -5px -5px 10px var(--neumorphism-light);
        }

        .list-column h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 18px;
        }

        .list {
            list-style-type: none;
            max-height: 300px;
            overflow-y: auto;
        }

        .list li {
            background: var(--neumorphism-light);
            margin-bottom: 10px;
            padding: 12px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 
                5px 5px 10px var(--neumorphism-dark),
                -5px -5px 10px var(--neumorphism-light);
            transition: all var(--transition-speed);
        }

        .list li:hover {
            transform: translateY(-3px);
        }

        .list li:active {
            transform: translateY(1px) scale(0.98);
        }

        .delete-btn, .complete-btn {
            background: linear-gradient(145deg, var(--tertiary-color), #c0392b);
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all var(--transition-speed);
            margin-left: 5px;
        }

        .complete-btn {
            background: linear-gradient(145deg, var(--secondary-color), #d35400);
        }

        .delete-btn:hover, .complete-btn:hover {
            transform: translateY(-2px);
        }

        .delete-btn:active, .complete-btn:active {
            transform: translateY(1px) scale(0.98);
        }

        .motivation {
            background: linear-gradient(145deg, #e6e6e6, #ffffff);
            border-radius: 20px;
            padding: 15px;
            text-align: center;
            color: var(--text-color);
            font-style: italic;
            margin-top: 20px;
            box-shadow: 
                10px 10px 20px var(--neumorphism-dark),
                -10px -10px 20px var(--neumorphism-light);
            transition: all var(--transition-speed);
        }

        .motivation:hover {
            transform: translateY(-5px);
        }

        .progress-container {
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: var(--neumorphism-light);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 
                inset 3px 3px 6px var(--neumorphism-dark),
                inset -3px -3px 6px var(--neumorphism-light);
        }

        .progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: width 0.5s ease-in-out;
            border-radius: 10px;
            box-shadow: 
                3px 3px 6px var(--neumorphism-dark),
                -3px -3px 6px var(--neumorphism-light);
        }

        .achievement {
            background: linear-gradient(145deg, #e6e6e6, #ffffff);
            border-radius: 15px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
            box-shadow: 
                5px 5px 10px var(--neumorphism-dark),
                -5px -5px 10px var(--neumorphism-light);
        }

        .achievement h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .achievement-progress {
            width: 100%;
            height: 10px;
            background-color: var(--neumorphism-light);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 
                inset 2px 2px 4px var(--neumorphism-dark),
                inset -2px -2px 4px var(--neumorphism-light);
        }

        .achievement-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-color), var(--tertiary-color));
            transition: width 0.5s ease-in-out;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 20px;
            cursor: pointer;
            transition: all var(--transition-speed);
            margin-left: 10px;
        }

        .theme-toggle:hover {
            transform: rotate(180deg);
        }

        .theme-toggle:active {
            transform: rotate(180deg) scale(0.98);
        }

        body.dark-theme {
            --background-color: #2c3e50;
            --text-color: #ecf0f1;
            --neumorphism-light: #34495e;
            --neumorphism-dark: #2c3e50;
            --shadow-color: rgba(0, 0, 0, 0.2);
        }

        body.dark-theme .container {
            background: var(--neumorphism-dark);
            box-shadow: 
                20px 20px 60px #253444,
                -20px -20px 60px #3e5974;
        }
		body.dark-theme .countdown,
        body.dark-theme .task-input,
        body.dark-theme .plan-input,
        body.dark-theme .motivation-input,
        body.dark-theme .focus-time-input,
        body.dark-theme .resource-input,
        body.dark-theme .list li,
        body.dark-theme .motivation,
        body.dark-theme .achievement {
            background: var(--neumorphism-dark);
            color: var(--text-color);
            box-shadow: 
                5px 5px 10px #253444,
                -5px -5px 10px #3e5974;
        }

        body.dark-theme .countdown-value,
        body.dark-theme .progress-bar,
        body.dark-theme .achievement-progress {
            background: var(--neumorphism-light);
            box-shadow: 
                inset 3px 3px 6px #253444,
                inset -3px -3px 6px #3e5974;
        }

        .focus-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .focus-content {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
            color: white;
            position: relative;
        }

        .focus-timer {
            font-size: 72px;
            margin-bottom: 20px;
            color: white;
            position: relative;
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .focus-timer::before {
            content: '';
            position: absolute;
            width: 230px;
            height: 230px;
            border-radius: 50%;
            background: conic-gradient(var(--primary-color) var(--progress), transparent var(--progress));
            mask: radial-gradient(transparent 65%, #000 66%);
            -webkit-mask: radial-gradient(transparent 65%, #000 66%);
        }

        .focus-message {
            font-size: 24px;
            margin-bottom: 20px;
            color: white;
        }

        .exit-focus-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            font-size: 24px;
            cursor: pointer;
            transition: all var(--transition-speed);
        }

        .exit-focus-btn:hover {
            color: white;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .current-time {
            font-size: 16px;
            color: var(--text-color);
            background: var(--neumorphism-light);
            padding: 8px 12px;
            border-radius: 15px;
            box-shadow: 
                5px 5px 10px var(--neumorphism-dark),
                -5px -5px 10px var(--neumorphism-light);
            transition: all var(--transition-speed);
        }

        .current-time:hover {
            transform: scale(1.05);
        }

        .resource-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .resource-item {
            background: var(--neumorphism-light);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 
                5px 5px 10px var(--neumorphism-dark),
                -5px -5px 10px var(--neumorphism-light);
            transition: all var(--transition-speed);
            width: calc(33.33% - 10px);
        }

        .resource-item:hover {
            transform: translateY(-3px);
        }

        .resource-item h4 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .resource-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .feature-explanation {
            background: var(--neumorphism-light);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 
                5px 5px 10px var(--neumorphism-dark),
                -5px -5px 10px var(--neumorphism-light);
        }

        .feature-explanation h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .feature-explanation ul {
            list-style-type: none;
            padding-left: 20px;
        }

        .feature-explanation li {
            margin-bottom: 10px;
            position: relative;
        }

        .feature-explanation li::before {
            content: '•';
            color: var(--primary-color);
            font-weight: bold;
            position: absolute;
            left: -15px;
        }

        .motivation-preset {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .motivation-preset-item {
            background: var(--neumorphism-light);
            padding: 10px 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all var(--transition-speed);
            box-shadow: 
                5px 5px 10px var(--neumorphism-dark),
                -5px -5px 10px var(--neumorphism-light);
        }

        .motivation-preset-item:hover {
            transform: translateY(-2px);
        }

        .motivation-preset-item:active {
            transform: translateY(1px) scale(0.98);
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                height: auto;
                width: 100%;
                border-radius: 0;
            }

            .sidebar {
                width: 100%;
                height: 60px;
                flex-direction: row;
                border-radius: 0;
                padding: 0 10px;
            }

            .menu-item {
                width: 40px;
                height: 40px;
                margin-bottom: 0;
                margin-right: 5px;
            }

            .menu-item i {
                font-size: 16px;
            }

            .main-content {
                padding: 15px;
                max-height: none;
            }

            .list-container {
                flex-direction: column;
            }

            .list-column {
                min-width: 100%;
            }

            .countdown-timer {
                flex-wrap: wrap;
            }

            .countdown-unit {
                width: 60px;
                margin: 5px;
            }

            .countdown-value {
                font-size: 24px;
            }

            .input-group {
                flex-direction: column;
            }

            .add-btn, .start-focus-btn, .import-btn {
                width: 100%;
                margin-top: 10px;
            }

            .header {
                flex-direction: column;
                align-items: flex-start;
            }

            .current-time {
                margin-bottom: 10px;
            }

            .resource-item {
                width: 100%;
            }

            .motivation-preset {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div>
                <div class="menu-item active" data-tab="home">
                    <i class="fas fa-home"></i>
                    <span class="tooltip">主页</span>
                </div>
                <div class="menu-item" data-tab="countdown">
                    <i class="fas fa-hourglass-half"></i>
                    <span class="tooltip">倒计时</span>
                </div>
                <div class="menu-item" data-tab="tasks">
                    <i class="fas fa-tasks"></i>
                    <span class="tooltip">任务</span>
                </div>
                <div class="menu-item" data-tab="plans">
                    <i class="fas fa-calendar-alt"></i>
                    <span class="tooltip">计划</span>
                </div>
                <div class="menu-item" data-tab="motivation">
                    <i class="fas fa-quote-right"></i>
                    <span class="tooltip">激励</span>
                </div>
                <div class="menu-item" data-tab="focus">
                    <i class="fas fa-bullseye"></i>
                    <span class="tooltip">专注</span>
                </div>
                <div class="menu-item" data-tab="resources">
                    <i class="fas fa-book"></i>
                    <span class="tooltip">学习资源</span>
                </div>
                <div class="menu-item" data-tab="features">
                    <i class="fas fa-info-circle"></i>
                    <span class="tooltip">功能说明</span>
                </div>
            </div>
        </div>
        <div class="main-content">
            <div class="header">
                <div class="current-time" id="currentTime"></div>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            <div class="content active" id="home">
                <h2>欢迎回来，奋斗的你！</h2>
                <div class="countdown">
                    <h3>距离高考还有</h3>
                    <div id="gaokao-countdown" class="countdown-timer"></div>
                </div>
                <div class="motivation" id="motivation-text"></div>
                <div class="achievement">
                    <h3>学习成就</h3>
                    <div class="achievement-progress">
                        <div class="achievement-bar" id="achievement-bar"></div>
                    </div>
                    <p id="achievement-text">继续加油，你已经完成了 0% 的目标！</p>
                </div>
            </div>

            <div class="content" id="countdown">
                <h2>时间倒计时</h2>
                <div class="countdown">
                    <h3>距离高考还有</h3>
                    <div id="gaokao-countdown-full" class="countdown-timer"></div>
                </div>
                <div class="countdown">
                    <h3>距离开学还有</h3>
                    <div id="school-countdown" class="countdown-timer"></div>
                </div>
            </div>

            <div class="content" id="tasks">
                <h2>任务列表</h2>
                <div class="input-group">
                    <input type="text" class="task-input" placeholder="输入新任务...">
                    <select id="task-category-select">
                        <option value="urgent">紧急</option>
                        <option value="important">重要</option>
                        <option value="normal">普通</option>
                    </select>
                    <button class="add-btn" id="addTaskBtn">添加任务</button>
                </div>
                <div class="list-container">
                    <div class="list-column">
                        <h3>紧急任务</h3>
                        <ul id="urgent-task-list" class="list"></ul>
                    </div>
                    <div class="list-column">
                        <h3>重要任务</h3>
                        <ul id="important-task-list" class="list"></ul>
                    </div>
                    <div class="list-column">
                        <h3>普通任务</h3>
                        <ul id="normal-task-list" class="list"></ul>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="task-progress"></div>
                    </div>
                </div>
            </div>

            <div class="content" id="plans">
                <h2>每日计划</h2>
                <div class="input-group">
                    <input type="text" class="plan-input" placeholder="输入新计划...">
                    <button class="add-btn" id="addPlanBtn">添加计划</button>
                </div>
                <ul id="plan-list" class="list"></ul>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="plan-progress"></div>
                    </div>
                </div>
            </div>

            <div class="content" id="motivation">
                <h2>自定义激励语</h2>
                <div class="motivation-preset">
                    <div class="motivation-preset-item">坚持就是胜利！</div>
                    <div class="motivation-preset-item">相信自己，你比想象中更强大！</div>
                    <div class="motivation-preset-item">今天的汗水是明天的彩虹。</div>
                    <div class="motivation-preset-item">成功不是偶然的，而是日复一日积累的结果。</div>
                    <div class="motivation-preset-item">没有人能够阻挡一个意志坚定的人。</div>
                </div>
                <div class="input-group">
                    <input type="text" class="motivation-input" placeholder="输入新的激励语...">
                    <button class="add-btn" id="addMotivationBtn">添加激励语</button>
                </div>
                <ul id="motivation-list" class="list"></ul>
            </div>

            <div class="content" id="focus">
                <h2>专注模式设置</h2>
                <div class="input-group">
                    <input type="number" class="focus-time-input" id="focusTimeInput" placeholder="设置专注时间（分钟）" min="1" max="120">
                    <button class="start-focus-btn" id="startFocusBtn">开始专注</button>
                </div>
            </div>

            <div class="content" id="resources">
                <h2>学习资源管理</h2>
                <div class="input-group">
                    <input type="file" id="resourceFile" accept=".ppt,.pptx,.doc,.docx,.pdf">
                    <input type="text" class="resource-input" id="resourceName" placeholder="资源名称">
                    <select id="resourceSubject">
                        <option value="chinese">语文</option>
                        <option value="math">数学</option>
                        <option value="english">英语</option>
                        <option value="physics">物理</option>
                        <option value="chemistry">化学</option>
                        <option value="biology">生物</option>
                    </select>
                    <button class="import-btn" id="importResourceBtn">导入资源</button>
                </div>
                <div class="resource-list" id="resourceList"></div>
            </div>

            <div class="content" id="features">
                <h2>功能说明</h2>
                <div class="feature-explanation">
                    <h3>主要功能</h3>
                    <ul>
                        <li><strong>倒计时：</strong>显示距离高考和开学的剩余时间。</li>
                        <li><strong>任务管理：</strong>添加、删除和管理紧急、重要和普通任务。</li>
                        <li><strong>每日计划：</strong>制定和跟踪每日学习计划。</li>
                        <li><strong>激励语：</strong>添加和查看自定义激励语。</li>
                        <li><strong>专注模式：</strong>设置专注时间，提高学习效率。</li>
                        <li><strong>学习资源管理：</strong>导入和管理学习资料，支持多种文件格式。</li>
                        <li><strong>成就系统：</strong>跟踪学习进度，激励持续学习。</li>
                        <li><strong>主题切换：</strong>支持浅色和深色主题，保护眼睛。</li>
                    </ul>
                </div>
                <div class="feature-explanation">
                    <h3>使用技巧</h3>
                    <ul>
                        <li>合理安排任务优先级，提高学习效率。</li>
                        <li>定期回顾和调整学习计划。</li>
                        <li>使用专注模式减少干扰，提高学习质量。</li>
                        <li>及时导入和整理学习资源，方便复习。</li>
                        <li>记录激励语，在学习低谷时给自己鼓励。</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="focus-mode">
        <div class="focus-content">
            <div class="focus-timer" id="focus-timer">25:00</div>
            <div class="focus-message">保持专注，你正在创造奇迹！</div>
            <button class="exit-focus-btn" id="exitFocusBtn"><i class="fas fa-times"></i></button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
    <script>
        // 常量和全局变量
        const STORAGE_KEYS = {
            TASKS: '-tasks',
            PLANS: 'plans',
            MOTIVATIONS: 'motivations',
            THEME: 'theme',
            FOCUS_TIME: 'focusTime',
            RESOURCES: 'resources'
        };
        const TASK_CATEGORIES = ['urgent', 'important', 'normal'];
        let focusTimer;
        let focusTime = 25 * 60; // 默认25分钟
        let focusInterval;

        // 预设励志语
        const DEFAULT_MOTIVATIONS = [
            "坚持就是胜利！每一天的努力都在为你的未来铺路。",
            "相信自己，你比想象中更强大！",
            "今天的汗水是明天的彩虹。加油，你正在创造奇迹！",
            "成功不是偶然的，而是日复一日积累的结果。",
            "没有人能够阻挡一个意志坚定的人。",
            "困难是你踏向成功的垫脚石。",
            "每一个现在，都是未来的基石。",
            "知识就是力量，学习让你无所不能。",
            "不要为已经发生的事悲伤，要为还没有实现的梦想努力。",
            "你的潜力是无限的，去发现并实现它吧！"
        ];

        // DOM 加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);

        function init() {
            setupMenuNavigation();
            setupCountdowns();
            loadTasks();
            loadPlans();
            loadMotivations();
            updateMotivation();
            loadSavedTheme();
            enableDragAndDrop();
            setupEventListeners();
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            loadResources();
        }

        // 设置菜单导航
        function setupMenuNavigation() {
            const menuItems = document.querySelectorAll('.menu-item');
            const contents = document.querySelectorAll('.content');

            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    const target = item.dataset.tab;
                    menuItems.forEach(t => t.classList.remove('active'));
                    contents.forEach(c => c.classList.remove('active'));
                    item.classList.add('active');
                    document.getElementById(target).classList.add('active');
                });
            });
        }

        // 设置倒计时
        function setupCountdowns() {
            const gaokaoDate = new Date("2025-06-07T00:00:00").getTime();
            const schoolDate = new Date("2024-08-30T09:00:00").getTime();

            function updateCountdown(targetDate, elementId) {
                const now = new Date().getTime();
                const distance = targetDate - now;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                const countdownElement = document.getElementById(elementId);
                if (countdownElement) {
                    countdownElement.innerHTML = `
                        <div class="countdown-unit">
                            <span class="countdown-value">${days}</span>
                            <span class="countdown-label">天</span>
                        </div>
                        <div class="countdown-unit">
                            <span class="countdown-value">${hours.toString().padStart(2, '0')}</span>
                            <span class="countdown-label">时</span>
                        </div>
                        <div class="countdown-unit">
                            <span class="countdown-value">${minutes.toString().padStart(2, '0')}</span>
                            <span class="countdown-label">分</span>
                        </div>
                        <div class="countdown-unit">
                            <span class="countdown-value">${seconds.toString().padStart(2, '0')}</span>
                            <span class="countdown-label">秒</span>
                        </div>
                    `;

                    if (distance < 0) {
                        countdownElement.innerHTML = "时间到！";
                    }
                }
            }

            setInterval(() => {
                updateCountdown(gaokaoDate, 'gaokao-countdown');
                updateCountdown(gaokaoDate, 'gaokao-countdown-full');
                updateCountdown(schoolDate, 'school-countdown');
            }, 1000);
        }

        // 任务管理
        function addTask() {
            const taskInput = document.querySelector('.task-input');
            const taskCategory = document.getElementById('task-category-select').value;
            const taskList = document.getElementById(`${taskCategory}-task-list`);
            
            if (taskInput.value.trim() !== '') {
                const li = createListItem(taskInput.value, `toggleTaskCompletion(this, '${taskCategory}')`, `deleteTask(this, '${taskCategory}')`);
                taskList.appendChild(li);
                taskInput.value = '';
                saveTasks();
                updateProgress('tasks');
                updateAchievement();
            } else {
                shakeElement(taskInput);
            }
        }

        function toggleTaskCompletion(checkbox, category) {
            const listItem = checkbox.closest('li');
            updateItemStyle(listItem, checkbox.checked);
            saveTasks();
            updateProgress('tasks');
            updateAchievement();
        }

        function deleteTask(btn, category) {
            const li = btn.closest('li');
            li.classList.add('fade-out');
            setTimeout(() => {
                li.remove();
                saveTasks();
                updateProgress('tasks');
                updateAchievement();
            }, 300);
        }

        function loadTasks() {
            TASK_CATEGORIES.forEach(category => {
                const tasks = JSON.parse(localStorage.getItem(`${category}${STORAGE_KEYS.TASKS}`)) || [];
                const taskList = document.getElementById(`${category}-task-list`);
                if (taskList) {
                    taskList.innerHTML = '';
                    tasks.forEach(task => {
                        const li = createListItem(task.text, `toggleTaskCompletion(this, '${category}')`, `deleteTask(this, '${category}')`, task.completed);
                        taskList.appendChild(li);
                    });
                }
            });
            updateProgress('tasks');
            updateAchievement();
        }

        function saveTasks() {
            TASK_CATEGORIES.forEach(category => {
                const tasks = Array.from(document.querySelectorAll(`#${category}-task-list li`)).map(li => ({
                    text: li.querySelector('span').textContent,
                    completed: li.querySelector('input').checked
                }));
                localStorage.setItem(`${category}${STORAGE_KEYS.TASKS}`, JSON.stringify(tasks));
            });
        }

        // 计划管理
        function addPlan() {
            const planInput = document.querySelector('.plan-input');
            const planList = document.getElementById('plan-list');
            
            if (planInput.value.trim() !== '') {
                const li = createListItem(planInput.value, 'togglePlanCompletion(this)', 'deletePlan(this)');
                planList.appendChild(li);
                planInput.value = '';
                savePlans();
                updateProgress('plans');
                updateAchievement();
            } else {
                shakeElement(planInput);
            }
        }

        function togglePlanCompletion(checkbox) {
            const listItem = checkbox.closest('li');
            updateItemStyle(listItem, checkbox.checked);
            savePlans();
            updateProgress('plans');
            updateAchievement();
        }

        function deletePlan(btn) {
            const li = btn.closest('li');
            li.classList.add('fade-out');
            setTimeout(() => {
                li.remove();
                savePlans();
                updateProgress('plans');
                updateAchievement();
            }, 300);
        }

        function loadPlans() {
            const plans = JSON.parse(localStorage.getItem(STORAGE_KEYS.PLANS)) || [];
            const planList = document.getElementById('plan-list');
            if (planList) {
                planList.innerHTML = '';
                plans.forEach(plan => {
                    const li = createListItem(plan.text, 'togglePlanCompletion(this)', 'deletePlan(this)', plan.completed);
                    planList.appendChild(li);
                });
            }
            updateProgress('plans');
            updateAchievement();
        }

        function savePlans() {
            const plans = Array.from(document.querySelectorAll('#plan-list li')).map(li => ({
                text: li.querySelector('span').textContent,
                completed: li.querySelector('input').checked
            }));
            localStorage.setItem(STORAGE_KEYS.PLANS, JSON.stringify(plans));
        }

        // 通用函数
        function createListItem(text, onChangeFunc, onDeleteFunc, completed = false) {
    const li = document.createElement('li');
    li.innerHTML = `
        <input type="checkbox" onchange="${onChangeFunc}" ${completed ? 'checked' : ''}>
        <span>${text}</span>
        <button class="delete-btn" onclick="${onDeleteFunc}">删除</button>
    `;
    updateItemStyle(li, completed);
    return li;
}
				
		// 通用函数（续）
        function updateItemStyle(listItem, completed) {
            if (completed) {
                listItem.style.textDecoration = 'line-through';
                listItem.style.opacity = '0.6';
            } else {
                listItem.style.textDecoration = 'none';
                listItem.style.opacity = '1';
            }
        }

        function updateProgress(type) {
            const progressBar = document.getElementById(`${type}-progress`);
            if (!progressBar) return;

            let totalItems, completedItems;

            if (type === 'tasks') {
                totalItems = document.querySelectorAll('#urgent-task-list li, #important-task-list li, #normal-task-list li').length;
                completedItems = document.querySelectorAll('#urgent-task-list li input:checked, #important-task-list li input:checked, #normal-task-list li input:checked').length;
            } else if (type === 'plans') {
                totalItems = document.querySelectorAll('#plan-list li').length;
                completedItems = document.querySelectorAll('#plan-list li input:checked').length;
            }

            const progressPercentage = totalItems > 0 ? (completedItems / totalItems) * 100 : 0;
            progressBar.style.width = `${progressPercentage}%`;
            progressBar.textContent = `${Math.round(progressPercentage)}%`;
        }

        function updateAchievement() {
            const totalItems = document.querySelectorAll('#plan-list li, #urgent-task-list li, #important-task-list li, #normal-task-list li').length;
            const completedItems = document.querySelectorAll('#plan-list li input:checked, #urgent-task-list li input:checked, #important-task-list li input:checked, #normal-task-list li input:checked').length;
            const achievementPercentage = totalItems > 0 ? (completedItems / totalItems) * 100 : 0;
            const achievementBar = document.getElementById('achievement-bar');
            const achievementText = document.getElementById('achievement-text');
            
            if (achievementBar && achievementText) {
                achievementBar.style.width = `${achievementPercentage}%`;
                achievementText.textContent = `继续加油，你已经完成了 ${Math.round(achievementPercentage)}% 的目标！`;

                if (achievementPercentage === 100) {
                    showCongratulations();
                }
            }
        }

        function showCongratulations() {
            alert('恭喜你完成了所有任务和计划！你是最棒的！');
        }

        function shakeElement(element) {
            element.classList.add('shake');
            setTimeout(() => element.classList.remove('shake'), 500);
        }

        // 激励语功能
        function addMotivation() {
            const motivationInput = document.querySelector('.motivation-input');
            const motivationList = document.getElementById('motivation-list');
            
            if (motivationInput.value.trim() !== '') {
                const li = createListItem(motivationInput.value, null, 'deleteMotivation(this)');
                motivationList.appendChild(li);
                motivationInput.value = '';
                saveMotivations();
                updateMotivation();
            } else {
                shakeElement(motivationInput);
            }
        }

        function deleteMotivation(btn) {
            const li = btn.closest('li');
            li.classList.add('fade-out');
            setTimeout(() => {
                li.remove();
                saveMotivations();
                updateMotivation();
            }, 300);
        }

        function loadMotivations() {
            const motivations = JSON.parse(localStorage.getItem(STORAGE_KEYS.MOTIVATIONS)) || DEFAULT_MOTIVATIONS;
            const motivationList = document.getElementById('motivation-list');
            if (motivationList) {
                motivationList.innerHTML = '';
                motivations.forEach(motivation => {
                    const li = createListItem(motivation, null, 'deleteMotivation(this)');
                    motivationList.appendChild(li);
                });
            }
        }

        function saveMotivations() {
            const motivations = Array.from(document.querySelectorAll('#motivation-list li span')).map(span => span.textContent);
            localStorage.setItem(STORAGE_KEYS.MOTIVATIONS, JSON.stringify(motivations));
        }

        function updateMotivation() {
            const motivationText = document.getElementById('motivation-text');
            const motivations = JSON.parse(localStorage.getItem(STORAGE_KEYS.MOTIVATIONS)) || DEFAULT_MOTIVATIONS;

            if (motivationText && motivations.length > 0) {
                motivationText.style.opacity = '0';
                setTimeout(() => {
                    motivationText.textContent = motivations[Math.floor(Math.random() * motivations.length)];
                    motivationText.style.opacity = '1';
                }, 500);
            }
        }

        // 专注模式功能
        function startFocusMode() {
            const focusTimeInput = document.getElementById('focusTimeInput');
            const focusTimeMinutes = parseInt(focusTimeInput.value) || 25;
            focusTime = focusTimeMinutes * 60;
            
            document.querySelector('.focus-mode').style.display = 'flex';
            updateFocusTimer();
            focusInterval = setInterval(updateFocusTimer, 1000);

            localStorage.setItem(STORAGE_KEYS.FOCUS_TIME, focusTimeMinutes);
        }

        function updateFocusTimer() {
            const focusTimerElement = document.getElementById('focus-timer');
            const minutes = Math.floor(focusTime / 60);
            const seconds = focusTime % 60;
            
            if (focusTimerElement) {
                focusTimerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // 更新圆形进度条
                const totalSeconds = parseInt(localStorage.getItem(STORAGE_KEYS.FOCUS_TIME)) * 60;
                const progress = ((totalSeconds - focusTime) / totalSeconds) * 360;
                focusTimerElement.style.setProperty('--progress', `${progress}deg`);
            
                if (focusTime === 0) {
                    clearInterval(focusInterval);
                    alert('专注时间结束！休息一下吧。');
                    exitFocusMode();
                } else {
                    focusTime--;
                }
            }
        }

        function exitFocusMode() {
            clearInterval(focusInterval);
            document.querySelector('.focus-mode').style.display = 'none';
        }

        // 主题切换功能
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const themeIcon = document.querySelector('.theme-toggle i');
            if (document.body.classList.contains('dark-theme')) {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            } else {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
            localStorage.setItem(STORAGE_KEYS.THEME, document.body.classList.contains('dark-theme') ? 'dark' : 'light');
        }

        function loadSavedTheme() {
            const savedTheme = localStorage.getItem(STORAGE_KEYS.THEME);
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
                document.querySelector('.theme-toggle i').classList.remove('fa-moon');
                document.querySelector('.theme-toggle i').classList.add('fa-sun');
            }
        }

        // 学习资源管理
        function importResource() {
            const resourceFile = document.getElementById('resourceFile').files[0];
            const resourceName = document.getElementById('resourceName').value;
            const resourceSubject = document.getElementById('resourceSubject').value;

            if (resourceFile && resourceName) {
                const resource = {
                    name: resourceName,
                    subject: resourceSubject,
                    path: URL.createObjectURL(resourceFile),
                    type: resourceFile.type,
                    completed: false
                };
                saveResource(resource);
                loadResources();
                document.getElementById('resourceFile').value = '';
                document.getElementById('resourceName').value = '';
            } else {
                alert('请选择文件并输入资源名称');
            }
        }

        function saveResource(resource) {
            let resources = JSON.parse(localStorage.getItem(STORAGE_KEYS.RESOURCES)) || [];
            resources.push(resource);
            localStorage.setItem(STORAGE_KEYS.RESOURCES, JSON.stringify(resources));
        }

        function loadResources() {
            const resources = JSON.parse(localStorage.getItem(STORAGE_KEYS.RESOURCES)) || [];
            const resourceList = document.getElementById('resourceList');
            resourceList.innerHTML = '';

            resources.forEach((resource, index) => {
                const resourceItem = document.createElement('div');
                resourceItem.className = 'resource-item';
                resourceItem.innerHTML = `
                    <h4>${resource.name}</h4>
                    <p>科目: ${resource.subject}</p>
                    <p>状态: ${resource.completed ? '已完成' : '未完成'}</p>
                    <div class="resource-actions">
                        <a href="${resource.path}" target="_blank" class="btn btn-primary">打开资源</a>
                        <button onclick="toggleResourceCompletion(${index})">${resource.completed ? '标记为未完成' : '标记为已完成'}</button>
                        <button onclick="deleteResource(${index})">删除</button>
                    </div>
                `;
                resourceList.appendChild(resourceItem);
            });
        }

        function toggleResourceCompletion(index) {
            let resources = JSON.parse(localStorage.getItem(STORAGE_KEYS.RESOURCES)) || [];
            resources[index].completed = !resources[index].completed;
            localStorage.setItem(STORAGE_KEYS.RESOURCES, JSON.stringify(resources));
            loadResources();
        }

        function deleteResource(index) {
            let resources = JSON.parse(localStorage.getItem(STORAGE_KEYS.RESOURCES)) || [];
            resources.splice(index, 1);
            localStorage.setItem(STORAGE_KEYS.RESOURCES, JSON.stringify(resources));
            loadResources();
        }

        // 拖拽排序功能
        function enableDragAndDrop() {
            const lists = document.querySelectorAll('.list');
            lists.forEach(list => {
                new Sortable(list, {
                    animation: 150,
                    ghostClass: 'sortable-ghost',
                    onEnd: () => {
                        if (list.id === 'plan-list') {
                            savePlans();
                            updateProgress('plans');
                        } else if (list.id.includes('task-list')) {
                            saveTasks();
                            updateProgress('tasks');
                        } else if (list.id === 'motivation-list') {
                            saveMotivations();
                        }
                        updateAchievement();
                    }
                });
            });
        }

        // 显示当前时间
        function updateCurrentTime() {
            const currentTimeElement = document.getElementById('currentTime');
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' };
            currentTimeElement.textContent = now.toLocaleDateString('zh-CN', options);
        }

        // 设置事件监听器
        function setupEventListeners() {
            document.getElementById('addTaskBtn').addEventListener('click', addTask);
            document.getElementById('addPlanBtn').addEventListener('click', addPlan);
            document.getElementById('addMotivationBtn').addEventListener('click', addMotivation);
            document.getElementById('startFocusBtn').addEventListener('click', startFocusMode);
            document.getElementById('exitFocusBtn').addEventListener('click', exitFocusMode);
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('importResourceBtn').addEventListener('click', importResource);

            document.querySelector('.task-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addTask();
            });

            document.querySelector('.plan-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addPlan();
            });

            document.querySelector('.motivation-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addMotivation();
            });

            const focusTimeInput = document.getElementById('focusTimeInput');
            focusTimeInput.value = localStorage.getItem(STORAGE_KEYS.FOCUS_TIME) || 25;
            focusTimeInput.addEventListener('change', function() {
                localStorage.setItem(STORAGE_KEYS.FOCUS_TIME, this.value);
            });

            // 添加预设激励语的点击事件
            const motivationPresets = document.querySelectorAll('.motivation-preset-item');
            motivationPresets.forEach(preset => {
                preset.addEventListener('click', function() {
                    const motivationInput = document.querySelector('.motivation-input');
                    motivationInput.value = this.textContent;
                });
            });
        }
        // 错误处理函数
        function handleError(error) {
            console.error('An error occurred:', error);
            alert('抱歉，发生了一个错误。请刷新页面后重试。');
        }
        // 定期更新和自动保存
        function setupAutoSave() {
            setInterval(() => {
                try {
                    saveTasks();
                    savePlans();
                    saveMotivations();
                    updateMotivation();
                } catch (error) {
                    handleError(error);
                }
            }, 60000); // 每分钟自动保存一次
        }
        // 页面可见性变化时更新数据
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                try {
                    loadTasks();
                    loadPlans();
                    loadMotivations();
                    loadResources();
                    updateProgress('tasks');
                    updateProgress('plans');
                    updateAchievement();
                } catch (error) {
                    handleError(error);
                }
            }
        });
        // 初始化函数
        function init() {
            try {
                setupMenuNavigation();
                setupCountdowns();
                loadTasks();
                loadPlans();
                loadMotivations();
                updateMotivation();
                loadSavedTheme();
                enableDragAndDrop();
                setupEventListeners();
                setupAutoSave();
                updateCurrentTime();
                setInterval(updateCurrentTime, 1000);
                loadResources();
            } catch (error) {
                handleError(error);
            }
        }

        // 优化：添加性能监控
        function monitorPerformance() {
            const performanceData = {
                loadTime: 0,
                resourceCount: 0,
                memoryUsage: 0
            };

            window.addEventListener('load', () => {
                performanceData.loadTime = performance.now();
                performanceData.resourceCount = performance.getEntriesByType('resource').length;
                if (performance.memory) {
                    performanceData.memoryUsage = performance.memory.usedJSHeapSize;
                }
                console.log('性能数据:', performanceData);
            });
        }

        // 优化：添加错误追踪
        function setupErrorTracking() {
            window.onerror = function(message, source, lineno, colno, error) {
                console.error('捕获到错误:', message, 'at', source, ':', lineno, ':', colno);
                // 这里可以添加错误上报逻辑
            };
        }

        // 优化：添加离线支持
        function setupOfflineSupport() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                    console.log('Service Worker 注册成功:', registration.scope);
                }).catch(function(error) {
                    console.log('Service Worker 注册失败:', error);
                });
            }
        }

        // 优化：添加页面可见性API使用
        function setupVisibilityAPI() {
            document.addEventListener('visibilitychange', function() {
                if (document.hidden) {
                    console.log('页面不可见，暂停一些操作...');
                    // 暂停一些不必要的操作，如动画或轮询
                } else {
                    console.log('页面可见，恢复操作...');
                    // 恢复操作
                    loadTasks();
                    loadPlans();
                    loadMotivations();
                    loadResources();
                    updateProgress('tasks');
                    updateProgress('plans');
                    updateAchievement();
                }
            });
        }

        // 优化：添加网络状态检测
        function setupNetworkDetection() {
            window.addEventListener('online', function() {
                console.log('网络已连接');
                // 同步本地数据到服务器
            });

            window.addEventListener('offline', function() {
                console.log('网络已断开');
                // 启用离线模式
            });
        }

        // 启动应用
        document.addEventListener('DOMContentLoaded', () => {
            init();
            monitorPerformance();
            setupErrorTracking();
            setupOfflineSupport();
            setupVisibilityAPI();
            setupNetworkDetection();
        });
		
    </script>
</body>
</html>
